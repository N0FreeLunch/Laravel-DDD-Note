## 서비스 개념
- 마이크로 서비스 아키텍처는 서비스를 여러 애플리케이션으로 나눠서 각 애플리케이션 간의 연동을 통해서 거대한 전체 서비스를 구성하는 것이다. 전체 서비스를 역할별로 경계를 잘 나누어 각각의 애플리케이션이 담당한 역할에 집중하며 특화된 기능을 제공하도록 한다. 또한 서비스별로 서로의 데이터를 분산 저장 및 처리를 통해 연동되는 어떤 서비스에서 장애가 일어나더라도 연동되는 부분이 아니라면 서비스가 지속될 수 있도록 만들어져 있기 때문에 사용자들에게 주는 불편함을 줄일 수 있다. 여러 부서가 개발에 참여하고 있고 각 부서간의 책임을 줄이기 위한 목적으로 도입되는 것이기도하다.
- 하지만 우리는 라라벨에 대해 다룬다. 하나의 라라벨 프로젝트는 애플리케이션 단위의 분리가 어렵다. 하나의 애플리케이션에서 책임에 따라 그 역할을 객체화 한 것으로 하나의 객체 또는 객체의 그룹이 특정 서비스의 역할을 맡는 것을 의미한다. 하나의 애플리케이션이라도 서비스는 여러 개념으로 나뉘는데 인프라 서비스, 도메인 서비스, 애플리케이션 서비스로 나뉜다. 

#### 인프라 서비스
- 인프라 서비스는 로깅 또는 메일 전송과 같은 애플리케이션의 핵심 로직과는 동떨어져 있지만 핵심 로직들을 구현하기 위해 사용되어야 할 서비스를 의미한다. 이는 대부분 라라벨 프레임워크에 구현된 기능 또는 외부 서비스들이 담당하고 있으므로 애플리케이션 개발자는 프레임워크나 외부 서비스들이 제공하는 API를 잘 가져다 사용하기만 하면 된다.

#### 도메인 서비스
- 도메인 서비스는 이루고자 하는 비즈니스 가치를 실현하기 위해 구성되는 애플리케이션의 주요 로직을 의미한다. 업무에 필요한 로직을 제공하기 위해서 작성된 코드이며 업무의 흐름과 그 제약 사항을 반영하여 만들어진다. 도메인에서 요구하는 로직은 다양하기 때문에 어떤 유형이 올지 예를 들기 어렵다. 하지만 하나의 역할로 추상화 될 수 있는 단위를 구분해 낼 수 있는 경우가 있으며 이런 업무의 단위를 객체 단위로 잘 추상화 한 것이 도메인 서비스가 될 수 있다. 또는 업무에 필요한 항목들의 그룹을 엔티티 단위로 만들어 놓은 부분이 도메인 서비스가 될 수 있다.  라라벨에서 서비스 로직의 엔티티는 엘로퀀트 모델이 가지고 있는 데이터들이 될 수 있으며 엘로퀀트 모델이 저장한 데이터 각각을 외부 상태에 대한 의존성 없이 단순하게 가공한 범위까지를 엔티티 서비스의 범위라고 할 수 있다.

#### 애플리케이션 서비스
- 애플리케이션 서비스는 애플리케이션과 유저 사이의 상호작용을 하는 부분에 대한 로직으로 유저에게 어떻게 데이터를 받아서 보여줄 것인가?에 해당하는 UI, 받은 데이터를 어떻게 가공해서 그 결과 값을 돌려 줄 것인가?에 해당하는 컨트롤러 등이 애플리케이션 서비스가 될 수 있다.

## 서비스 계층
- 일반적으로 도메인 주도 설계에서 서비스 계층은 도메인 서비스를 정의한 부분에 해당한다. 이 도메인 서비스는 핵심적인 비즈니스 로직들이 위치하는 곳으로 핵심적인 비즈니스 가치와 동떨어진 로직들은 이 계층에 넣지 않는 것을 권한다.
- 서비스 계층의 객체는 비즈니스 논리를 잘 설명하는 행동을 나타내며, 비즈니스가 제공하는 조건에 따른 결과를 다루는 로직을 구현하기 위해 캡슐화 된 객체가 위치해야 한다.

## 경계 문제
- 비즈니스의 핵심 가치로 서비스계층을 구성하기 위해서는 도메인의 어떤 부분을 서비스로 만들 것인가에 대한 고민이 필요하다.
- 서비스로직이라는 것은 도메인을 다루면서 도메인에서 벌어지는 문제이며 도메인 문제를 해결하기 위해 보조적으로 사용되는 UI의 문제, 인프라의 문제 등을 최대한 배제한 논리로 구성되어야 한다.
- 도메인 주도설계에서는 레이어를 분리하고 이 레이어는 다른 계층을 교체하더라도 사용될 수 있는 것이어야 한다고 설명한다. 물론 라라벨에서 엑티브레코드를 사용하는 것은 영속성 계층과 저장소 사이의 의존관계가 있기는 하지만 이는 엑티브레코드가 제공하는 이점이 레이어를 완전히 분리하는 것 보다는 낫기 때문이다. 서비스레이어의 로직은 가능한한 도메인에 의존적이며 프레임워크나 라이브러리 UI 등에 대한 의존성은 최소한으로 하는 편이 좋다.

## 도메인 모델링
- 초보자들은 비즈니스가 요구하는 결과를 만들어 내기 위해서 데이터를 가공하는 방식을 중심으로 생각하지만, 비즈니스 로직에서 객체로 다룰 수 있는 책임을 분간해 내고 객체와 메소드를 유비쿼터스 언어에서 정의한 대로 이름을 붙여주는 로직을 만들기 위한 모델링인 도메인 모델링을 중심으로 생각해야 한다.  
- 데이터를 가공하는 방식으로 만들어 내면 비즈니스에서 요구하는 로직과 이질감이 생기게 되고 이는 코드와 비즈니스를 별개의 로직으로 바라보게 하고 최종적인 결과만 비즈니스에서 요구하는 결과에 맞추는 방식이 되어서 비즈니스의 세부적인 변경사항에도 전체 로직을 검토하고 부분이 아닌 전체를 수정해야 하는 경우가 더 많이 생길 수 있다. 또한 비즈니스와 코드의 흐름이 별개이므로 이 로직을 해석하는데 드는 시간과 피로감도 상당하다.
- 비즈니스의 요구사항이 전달되었을 때 코드에서 관련된 로직을 쉽게 찾고 수정할 수 있어야 하는데 도메인 용어와 별개인 코드, 객체, 메소드는 코드는 비즈니스의 본질에 집중하지 못하게 하여 코드의 수정 확장 개선 작업에 지루하고 의미없는 시간을 보내게 할 수 있다. 
