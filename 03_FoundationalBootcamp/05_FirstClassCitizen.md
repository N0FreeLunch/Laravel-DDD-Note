# 일급 시민

## 일급 시민의 정의 (Robin Popplestone)
- 모든 요소는 함수의 실제 매개변수가 될 수 있다.
- 모든 요소는 함수의 반환 값이 될 수 있다.
- 모든 요소는 할당 명령문의 대상이 될 수 있다.
- 모든 요소는 동일 비교의 대상이 될 수 있다.

## 프로그래밍 언어에서 일급 시민
- 함수의 인자로 전달 될 수 있으며, 함수의 리턴값으로 정의할 수 있는 것.
- OOP 언어에서 객체는 함수의 인자로 넣을 수 있으며, 함수의 리턴값으로 사용할 수 있다.
- 함수형 언어에서 함수는 함수의 인자로 넣을 수 있으며, 함수의 리턴값으로 사용될 수 있다.
- 멀티패러다임 언어에서는 객체도, 함수도 함수의 인자로 넣고 반환할 수 있다.
- 객체와 함수는 할당의 대상이며 여러 객체는 동일한 객체인지 아닌지 구분할 수 있다.
- 정의에 따르면 정수, 실수, 문자열 등의 자료형들도 일급 시민의 의미를 가진다.
- 프로그래밍 언어의 여러 구성 요소들 중에 가장 다양하게 이용될 수 있는 것, 어디에나 갖다 붙일 수 있는 것을 다른 요소에 비해 특권을 가졌다고 해서 일급 시민이라고 지칭한다.

## 일반적인 의미의 일급 시민
- 함수라는 것은 정의역을 함수에 넣으면 그 정의역에 대응하는 치역의 값이 매핑되는 것이다.
- 프로그래밍의 함수도 함수이지만 수학적인 의미에서 함수가 된다면 프로그래밍 언어의 함수 뿐만 아니라, 데이터의 입출력에 관련한 한 단위의 로직 등도 일급 시민이 될 수 있다.
- 수학적인 의미의 함수와 같이 이 함수의 정의역과 치역은 범위를 가지며 범위 내의 다양한 원소들을 함수에 넣을 수 있다. 마찬가지로 일급시민이라는 것은 도메인 로직의 다양한 구성에 자유롭게 넣고 뺄 수 있는 구조를 가지는 방식으로 만들어지는 것을 의미한다.

## 도메인 계층에서 일급 시민이란
- 전체 비즈니스 및 애플리케이션의 핵심 개체 또는 핵심 비즈니스 프로세스를 의미하며, 일급 시민을 통해서 애플리케이션의 다양한 기능들이 구현 된다.
- 여러 도메인 로직의 여러 부분에서 사용될 수 있는 대상으로 주로 영속성 계층의 입출력을 담당하는 객체를 의미한다.

## 함수
- 수학적인 의미에서 함수를 배울 때 함수는 내부를 알 수 없는 상자로 비유된다.
- 함수라는 상자에 무언가를 넣으면 어떤 결과가 반환이 되는 것이 함수의 특성이다.

### 도메인 계층에서 함수란?
- 캡슐화 된 대상은 모두 어느정도 함수적인 특성을 가지고 있다.
- 캡슐화는 다른 기능, 모듈, 객체와 통신을 하기 위한 인터페이스를 제공하고, 내부 구현을 인터페이스에 드러나지 않게 하는 것을 의미한다.
- 캡슐화 된 대상을 외부에서 다룰 때는 함수와 마찬가지로 외부에서 다룰 대상의 내부 구현에 대해서 상세하게 알 수 없다.
- 하지만 캡슐화 된 대상에는 사이드 이펙트가 존재하기 때문에 완전히 수학적 정의의 함수라고는 할 수 없다.

### 모델이란 일급 시민
- 모델 계층은 MVC 아키텍처의 모델에 해당한다. 영속성 계층의 데이터의 CURD를 다루기 위한 조작을 담당하는 부분으로 구현되어 있다.
- 모델을 도메인 계층에서의 일급 시민으로 본다면, 도메인 계층의 모든 코드, 정책, 절차 및 인프라는 모델을 이용하기 위한 함수로 보면 된다. 물론 사이드이펙트가 존재하므로 순수한 함수로는 볼 수 없다.
- 데이터베이스를 제외한 애플리케이션만을 생각하면 유저에게 인터페이스를 제공하는 부분과 데이터를 다루기 위한 모델 부분을 연결하는 중간의 도메인 계층은 캡슐화 되어 있으며 함수적인 특성을 가진다.
- 모델을 일급 시민으로 만들게 되면 함수적인 특성과 캡슐화 된 도메인 계층을 만들게 된다. 이렇게 하면 모델과 도메인 계층은 완전히 분리된 별개의 레이어를 가질 수 있다.
- 모델을 일급 시민으로 만들고 도메인을 일급 시민이 이용할 수 있는 함수처럼 만드는 것이 도메인 계층을 영속성 계층과 분리하여 도메인 지식에 초점을 맞춘 구현을 해 나갈 수 있는 핵심이 된다. 

