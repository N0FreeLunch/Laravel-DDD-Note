## 컨텍스트
- 컨텍스트는 문맥으로 DDD에서는 비즈니스 로직의 한 집합체를 의미한다. 클래스 집합이나 모듈을 한 단위의 비즈니스 로직의 집합 안으로 이동시키는 것을 컨텍스트 내에 위치시키는 것이라고 말한다. 
- 모듈을 만들어도 컨텍스트 내에 위치시키지 못하는 경우, 곧 비즈니스의 모듈로서 맞지 않는 모듈이 만들어지는 경우 고려할 것은 분리할 필요가 없거나 도메인에 대한 명확한 정의를 하지 않아서 생기는 문제, 잘못된 유비쿼터스 언어의 정의 때문일 수 있다.

### 잘못된 컨텍스트가 끼치는 영향
- 머드볼 구조를 만들 수 있다. 
- MVP에 도달하고 나서 확장하기 어렵다.

#### MVP란?
- Minimum Viable Product
- 최소 기능 제품
- 고객의 요구사항을 최소 기능만으로 구현한 제품이다.

## 레거시
- 보통 레거시라고 하면 오래된 코드를 의미하지만, 개발자들 사이에서 레거시의 의미는 모범사례 및 표적적인 방식으로 코딩되지 않은 것을 의미한다. 개발 문서가 없는 상황에서 레거시 코드를 개선하기 위해서는 도메인 로직의 경계가 불분명한 코드를 한 줄씩 단계별로 문서를 읽어 나갈 필요성이 있다. 이 경우, 레거시 코드를 리펙토링 하기 보다는 새로 만드는 방법을 택한다.
- 하지만 레거시 애플리케이션을 새로 만드는 것 보다는 '부패 방지 계층'(anti-corruption layer)을 만드는 방식으로 개선하는 편이 좋다.

### Anti-corruption layer (ACL)
- 레거시 코드와 분리된 레이어를 만드는 것이다. 이 레이어를 만드는 것은, 레거시와 통신이 가능한 다른 어플리케이션일 수도 있고, 하나의 애플리케이션 안의 레이어로 구분된 코드일 수도 있다.
- Anti-corruption layer에 레거시 코드의 기능과 동일한 기능을 제공하는 코드를 만드는 방식으로 구성한다. 그리고 이 레이어는 모범사례 및 표준적인 방식으로 빌드한다.
- 레거시 코드를 하나씩 대체해 나가는 방식으로 코드를 리펙토링하는 것이지만 레거시 코드 자체를 건드리기 보다는 하나의 기능이 완전하게 변경되기 전까지는 부패 방지 계층에서 레거시 코드의 기능을 연결하는 역할을 하며 점진적으로 레거시 코드의 기능까지 대체하는 방향으로 수정을 한다. 
- 물론 이 과정이 쉬운 과정은 아니며, 소규모 애플리케이션의 경우 새로 작성 하는 것이 나을 수도 있다.
- 이 계층은 필요에 따라 하나만 구축하는 것이 아니라 웹 서비스의 '컨트롤러 – 서비스 – 레포지토리 – 모델'과 같이 일반적인 애플리케이션을 만드는 방식으로 점진적인 변화를 통해 완성된 애플리케이션으로 대체하는 방식으로 사용한다.
- 기능의 확장은 레거시 코드에서 확장을 하지 않고 추가 모듈을 구현하는 계층을 만드는 방식으로 ACL을 확장하는 것이 필요하다. ACL을 통해서 레거시 시스템을 도메인 시스템으로 만드는 과정이 필요하다.
- 이렇게 ACL과 레거시 코드 간의 통신 또는 코드 간의 데이터 전달이 되면서 새로운 기능 및 개선된 기능 및 구성은 ACL의 기능을 사용하고, 개선되지 않은 레거시 기능은 ACL을 거쳐서 레거시 기능을 사용하도록 만들면서 ACL 계층에서 레거시 코드를 대체할 수 있는 단위를 만들어 간다.
- 개선하면서 베스트프렉틱스 및 단위 테스트 및 문서를 만들자.



