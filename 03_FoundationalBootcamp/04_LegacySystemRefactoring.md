## 컨텍스트
- 컨텍스트는 문맥으로 DDD에서는 비즈니스 로직의 한 집합체를 의미한다. 클래스 집합이나 모듈을 한 단위의 비즈니스 로직의 집합 안으로 이동시키는 것을 컨텍스트 내에 위치시키는 것이라고 말한다. 
- 모듈을 만들어도 컨텍스트 내에 위치시키지 못하는 경우, 곧 비즈니스의 모듈로서 맞지 않는 모듈이 만들어지는 경우 고려할 것은 분리할 필요가 없거나 도메인에 대한 명확한 정의를 하지 않아서 생기는 문제, 잘못된 유비쿼터스 언어의 정의 때문일 수 있다.

### 잘못된 컨텍스트가 끼치는 영향
- 머드볼 구조를 만들 수 있다. 
- MVP에 도달하고 나서 확장하기 어렵다.

#### MVP란?
- Minimum Viable Product
- 최소 기능 제품
- 고객의 요구사항을 최소 기능만으로 구현한 제품이다.

## 레거시
- 남으로부터 넘겨받은 코드를 분석하기 해야 하는 상황에서 문서가 없다면, 한 줄씩 단계별로 문서를 읽어나가야 한다. 이 경우 레거시 리펙토링 하기 보다는 새로 만드는 방법을 택하게 된다.
- 하지만 위와 같은 레거시 코드라고 하더라도 새로 만드는 것 보다는 '부패 방지 계층'(anti-corruption layer)을 만드는 방식으로 개선하는 편이 좋다.

### Anti-corruption layer (ACL)
- 레거시 코드와 분리된 레이어를 만드는 것이다. 
- Anti-corruption layer에 레거시 코드의 기능과 동일한 기능을 하는 코드를 만들지만, 모범사례 및 표준적인 방식으로 빌드한다.
- 레거시 코드를 하나씩 대체해 나가는 방식으로 코드를 리펙토링하는 것이지만 레거시 코드 자체를 건드리기 보다는 하나의 기능이 완전하게 변경되기 전에는 부패 방지 계층이 레거시 코드의 기능을 연결하는 역할을 하며 점진적으로 레거시 코드의 기능까지 대체하는 방향으로 수정을 한다.
- 물론 이 과정이 쉬운 과정은 아니다.
- 이 계층은 필요에 따라 하나만 구축하는 것이 아니라 웹 서비스의 ‘컨트롤러 – 서비스 – 레포지토리 – 모델’과 같이 추가 모듈을 구현하는 계층을 만드는 방식으로 ACL을 확장하는 것이 필요하다. ACL을 통해서 레거시 시스템을 도메인 시스템으로 만드는 과정이 필요하다.
- 이렇게 ACL에서 레거시 코드와의 연결이 되면서 처리가 ACL을 거치게 만들게 되면 ACL 부분에 개선한 코드를 빌드하면서 레거시 코드를 대체할 수 있는 단위가 만들어지면 대체하는 방식으로 개선한다.
- 개선하면서 베스트프렉틱스 및 단위 테스트 및 문서를 만들자.

