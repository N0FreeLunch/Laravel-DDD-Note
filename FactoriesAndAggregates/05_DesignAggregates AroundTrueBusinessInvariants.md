## 불변성을 중심으로 애그리게이트 디자인
- 애그리게이트는 일반적으로 도메인 모델 객체의 불변성을 유지하기 위해 사용한다.
- 불변성을 통해 비즈니스 문제를 해결할 수 있는 경우 유용하다.
- 비즈니스 모델에서 불변량을 다루는 부분을 따로 모델링한다.
- 각 도메인 또는 기능 간의 순서가 중요한 경우, 유효성 있는 도메인 모델로 만들기 위한 어떤 로직이 필요한 경우 데이터베이스와 응용 프로그램 내에서 이런 순서에 따라 유효한 로직에 따라 전개될 수 있도록 불변량의 기준을 세우는 것이 중요하다.


### 예
- 구매 주문 집계에는 회계 부서에서 승인할 수 있도록 구매주문(Purchase Order)에 하나 이상의 주문 단위(line item)가 있어야 한다는 비즈니스 규칙이 있을 수 있다.
- 주문 단위의 금액의 합계가 일정 금액 이하이여야 한다는 허용 가능한 최대 금액이 있을 경우 등의 제한 조건이 있을 수 있다.
- 이런 개념들도 도메인 모델 내에 명시적으로 만들어 주는 것이 좋은데 불변량이란 개념을 사용하여 코드를 표현할 수 있다.
